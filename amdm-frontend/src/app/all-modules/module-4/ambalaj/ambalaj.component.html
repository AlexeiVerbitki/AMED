<div>
    <div class="container-fluid sky z-depth-2">
        <h3 class="text-center my-3 font-weight-bold">Inregistrare cerere</h3>
        <!--evaluateImportForm: {{evaluateImportForm.value | json}}-->
        <!--importTypeForms: {{importTypeForms.value | json}}-->
        <!--importTypeForms: {{importTypeForm.value | json}}-->

        <form [formGroup]="evaluateImportForm">
            <div class="row">
                <div class="col-lg-4">
                    <div class="md-form">
                        <input id="requestNumber" mdbInputDirective type="text" class="form-control" formControlName="requestNumber"
                               [attr.disabled]="true">
                        <label for="requestNumber">Nr. cererii</label>
                    </div>
                </div>

                <div class="col-lg-4">
                    <div class="md-form-modified">
                        <mat-form-field class="w-100">
                            <input matInput [matDatepicker]="picker" placeholder="Data"
                                   formControlName="startDate" >
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker touchUi #picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="md-form">
                        <!--<mat-form-field class="w-100">-->
                            <!--<mat-select id="solicitantCompany" placeholder="Compania solicitant"-->
                                        <!--formControlName="company">-->
                                <!--<mat-option *ngFor="let solicitantCompany of solicitantCompanyList" [value]="solicitantCompany">{{ solicitantCompany.name }}</mat-option>-->
                            <!--</mat-select>-->
                        <!--</mat-form-field>-->
                        <input id="company" mdbInputDirective type="text" class="form-control"
                               value={{evaluateImportForm.value.company.name}} [attr.disabled]="true">
                        <label for="company">Compania solicitant
                        </label>
                        <!--value={{evaluateImportForm.value.company.name}}-->
                    </div>
                </div>

            </div>

            <app-document [documents]="docs" [nrCerere]="evaluateImportForm.get('requestNumber').value"></app-document>
            <div *ngIf="formSubmitted && docs && docs.length==0">
                <small class="text-muted"><strong class="text-danger">Nici un document nu a fost incarcat</strong></small>
            </div>


            <div formGroupName="importAuthorizationEntity">


                <!--<hr>-->
                <!--<table class="table text-center">-->
                    <!--<thead class="black white-text">-->
                    <!--<tr>-->
                        <!--<th scope="col">Denumire</th>-->
                        <!--<th scope="col">Format</th>-->
                        <!--<th scope="col">Data incarcarii</th>-->
                        <!--<th scope="col">Actiuni</th>-->
                    <!--</tr>-->
                    <!--</thead>-->
                    <!--<tbody>-->
                    <!--<tr *ngFor="let x of cereri; let i = index">-->
                        <!--<th scope="row">{{ x.denumirea }}</th>-->
                        <!--<td>{{ x.format }}</td>-->
                        <!--<td>{{ x.dataIncarcarii }}</td>-->
                        <!--<td>-->
                            <!--&lt;!&ndash;<button class="btn btn-mdb-color btn-sm waves-light" (click)="loadFile()" mdbWavesEffect>Vizualizare</button>&ndash;&gt;-->
                            <!--&lt;!&ndash;<button class="btn btn-dark-red-color waves-light btn-sm waves-light" (click)="removeDocument(i)" mdbWavesEffect>Stergere </button>&ndash;&gt;-->
                        <!--</td>-->
                    <!--</tr>-->
                    <!--</tbody>-->
                <!--</table>-->
                <!--<hr>-->
                <!--<div class="col-lg-2 position-button mt-3 text-right">-->
                    <!--<label class="btn btn-indigo btn-sm" for="incarcaraFisier">-->
                        <!--<input id="incarcaraFisier" type="file" style="display:none;" (change)="onChange($event)" onclick="this.value=null;">-->
                        <!--Incarca Cerere-->
                    <!--</label>-->
                <!--</div>-->

                <div class="row">


                    <div class="col-md-4">
                        <div class="md-form-modified">
                            <ng-select  [items]="manufacturersRfPr | async"
                                       bindLabel="description"
                                       placeholder="Vînzător"
                                       formControlName="seller"
                                       [loading]="loadingManufacturerRfPr"
                                       [typeahead]="manufacturerInputsRfPr"
                                       required="true">
                                <ng-template ng-option-tmp let-item="item">
                                    {{item.description}}
                                    <small class="form-text text-muted">{{item.address}}, {{item.country.description}}</small>
                                </ng-template>
                            </ng-select>
                        </div>
                    </div>


                    <div class="col-md-4">
                        <div class="md-form-modified">
                            <!--<ng-select [items]="manufacturersRfPr | async"-->
                                       <!--bindLabel="description"-->
                                       <!--placeholder="Ţara şi adresa vînzătorului"-->
                                       <!--formControlName="seller"-->
                                       <!--[loading]="loadingManufacturerRfPr"-->
                                       <!--[typeahead]="manufacturerInputsRfPr"-->
                                       <!--required="true">-->
                                <!--<ng-template ng-option-tmp let-item="item">-->
                                    <!--{{item.address}}-->
                                <!--</ng-template>-->
                            <!--</ng-select>-->


                            <div class="md-form">

                                <input  id="adresa" mdbInputDirective type="text" class="form-control"
                                       [attr.disabled]="true" [value]="sellerAddress"> <!--{{sellerAddress.value}}-->

                                <label for="adresa">Adresa vînzătorului</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="md-form">
                            <input id="basisForImport" mdbInputDirective type="text" class="form-control" formControlName="basisForImport">
                            <label for="basisForImport">Temeiul pentru autorizație de import (Contract)
                                <span class="text-danger">*</span>
                            </label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="md-form-modified">
                            <mat-form-field class="w-100">
                                <mat-select id="importer" placeholder="Importator"
                                            formControlName="importer">
                                    <mat-option *ngFor="let solicitantCompany of solicitantCompanyList" [value]="solicitantCompany">{{ solicitantCompany.name }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="md-form">
                            <input id="importerAddress" mdbInputDirective type="text" class="form-control"[value]="importerAddress">  <!--formControlName="importerAddress"-->
                            <label for="importerAddress">Ţara şi adresa importatorului
                                <span class="text-danger">*</span>
                            </label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="md-form">
                            <input id="conditionsAndSpecification" mdbInputDirective type="text" class="form-control"
                                   formControlName="conditionsAndSpecification">
                            <label for="basisForImport">Condiții și precizări
                                <span class="text-danger">*</span>
                            </label>
                        </div>
                    </div>

                    <div class="text-center w-100 mt-3">
                        <div class="alert alert-primary">
                            <span>Nr. de inregistrare a cererii: </span>
                            <strong>{{generatedDocNrSeq}}</strong>
                        </div>
                    </div>
                </div>

                <hr>


                <section>


                    <h5 class="text-center font-weight-bold">Informația despre ambalaj</h5>
                    <hr>
                    <div formArrayName="importAuthorizationDetailsEntityList">
                        <!--<div *ngFor="let importTypeForm of importTypeForms.controls; let i=index" [formGroupName]="i">-->
                            <div class="row">
                                <div class="col-4">
                                    <div class="md-form">
                                        <input id="customsCode" mdbInputDirective type="text" class="form-control"
                                               formControlName="customsCode">
                                        <label for="customsCode">Codul vamal</label>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="md-form">
                                        <input id="name" mdbInputDirective type="text" class="form-control"
                                               formControlName="name">
                                        <label for="name">Denumirea materiei prime (DCI)</label>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="md-form">
                                        <input id="quantity" mdbInputDirective type="number" class="form-control"
                                               formControlName="quantity">
                                        <label for="quantity">Cantitatea</label>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="md-form">
                                        <input id="price" mdbInputDirective type="number" class="form-control"
                                               formControlName="price">
                                        <label for="price">Pretul</label>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <!--<div class="md-form">-->
                                        <!--<input id="valuta" mdbInputDirective type="text" class="form-control"-->
                                               <!--formControlName="currency">-->
                                        <!--<label for="valuta">Valuta</label>-->
                                    <!--</div>-->
                                    <div class="md-form-modified">
                                        <mat-form-field class="w-100">
                                            <mat-select id="currency" placeholder="Valuta"
                                                        formControlName="currency">
                                                <mat-option *ngFor="let valuta of valutaList" [value]="valuta">{{ valuta.shortDescription }}</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                    <!--<div *ngIf="!evaluateImportForm.get('currency').valid && !evaluateImportForm.get('currency') ">-->
                                        <!--<small class="text-muted"><strong class="text-danger">Valuta trebuie introdusă</strong>-->
                                        <!--</small>-->
                                    <!--</div>-->
                                </div>
                                <div class="col-4">
                                    <div class="md-form">
                                        <input id="summ" mdbInputDirective type="number" class="form-control"
                                               [attr.disabled]="true"
                                               formControlName="summ" >
                                        <label for="summ">Suma</label>
                                        <!--Suma: {{importTypeForms[i].price}}-->
                                    </div>
                                </div>

                                <!--<div class="col-6">-->
                                    <!--<div class="md-form">-->
                                        <!--<input id="producer" mdbInputDirective type="text" class="form-control"-->
                                               <!--formControlName="producer">-->
                                        <!--<label for="producer">Firma producătoare-->
                                            <!--<span class="text-danger">*</span>-->
                                        <!--</label>-->
                                    <!--</div>-->
                                <!--</div>-->
                                <div class="col-md-4">
                                    <!--<div class="md-form-modified">-->
                                        <!--<mat-form-field class="w-100">-->
                                            <!--<mat-select id="producer" placeholder="Firma producătoare"-->
                                                        <!--formControlName="producer">-->
                                                <!--<mat-option *ngFor="let solicitantCompany of solicitantCompanyList" [value]="solicitantCompany">{{ solicitantCompany.name }}</mat-option>-->
                                            <!--</mat-select>-->
                                        <!--</mat-form-field>-->
                                    <!--</div>-->
                                    <div class="md-form-modified" >
                                        <ng-select [items]="manufacturersRfPr | async"
                                                   bindLabel="description"
                                                   placeholder="Producatorul"
                                                   formControlName="producer"
                                                   [loading]="loadingManufacturerRfPr"
                                                   [typeahead]="manufacturerInputsRfPr"
                                                   required="true">
                                            <ng-template ng-option-tmp let-item="item">
                                                {{item.description}};
                                                <small class="form-text text-muted">{{item.address}}, {{item.country.description}}</small>


                                            </ng-template>
                                        </ng-select>
                                    </div >
                                </div>
                                <div class="col-md-4">
                                    <div class="md-form">
                                        <input id="producerAddress" mdbInputDirective type="text" class="form-control"
                                               [value]="producerAddress" [attr.disabled]="true">
                                        <label for="producerAddress">Ţara şi adresa producătorului materiei prime
                                            <span class="text-danger">*</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="col-4">
                                    <div class="md-form-modified">
                                        <mat-form-field class="w-100">
                                            <input matInput [matDatepicker]="picker22" placeholder="Termen de valabilitate"
                                                   formControlName="expirationDate">
                                            <mat-datepicker-toggle matSuffix [for]="picker22"></mat-datepicker-toggle>
                                            <mat-datepicker touchUi #picker22></mat-datepicker>
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                            <div class="text-right">
                                <!--<button class="btn btn-danger waves-light btn-md" (click)="deleteImportTypeForm(i)">Sterge</button>-->
                                <!--<button type="submit" class="btn btn-indigo waves-light btn-md" mdbWavesEffect (click)="addImportTypeForm()" (click)="getProducerAddress(i)">Adauga</button>-->
                                <button type="submit" class="btn btn-indigo waves-light btn-md" mdbWavesEffect (click)="addUnitOfImport()">Adauga</button>
                            </div>
                        <!--</div>-->
                    </div>

                    <table class="table table-widths text-center">
                        <thead class="black white-text">
                        <tr>
                            <th scope="col">Codul Vamal</th>
                            <th scope="col">Denumirea materiei prime (DCI)</th>
                            <th scope="col">Cantitate</th>
                            <th scope="col">Pretul</th>
                            <th scope="col">Valuta</th>
                            <th scope="col">Suma</th>
                            <th scope="col">Producatorul</th>
                            <th scope="col">Ţara şi adresa producătorului materiei prime</th>
                            <th scope="col">Termen de valabilitate</th>
                            <!--<th scope="col">Actiuni</th>-->
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let unitOfImport of unitOfImportTable;let i = index">
                            <th scope="row">{{ unitOfImport.customsCode }}</th>
                            <td>{{ unitOfImport.name }}</td>
                            <td>{{ unitOfImport.quantity }}</td>
                            <td>{{ unitOfImport.price }}</td>
                            <td>{{ unitOfImport.currency.shortDescription }}</td>
                            <td>{{ unitOfImport.summ }}</td>
                            <td>{{ unitOfImport.producer }}</td>
                            <td>{{ unitOfImport.producerAddress }}</td>
                            <td>{{ unitOfImport.expirationDate | date:'mediumDate' }}</td>
                            <td>
                                <button class="btn btn-dark-red-color waves-light btn-sm waves-light" (click)="removeunitOfImport(i)" mdbWavesEffect>Stergere</button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                    <div *ngIf="formSubmitted && unitOfImportTable.length==0">
                        <small class="text-muted"><strong class="text-danger">Nici o unitate de import nu a fost adaugata</strong></small>
                    </div>

                    <hr>
                </section>
                <div class="text-center">
                    <button class="btn btn-dark-green-color waves-light btn-sm btn-sm-bl" mdbWavesEffect (click)="nextStep()" type="button">Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>

